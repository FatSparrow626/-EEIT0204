2025-08-27T11:06:03.805+08:00 DEBUG 4960 --- [demo] [nio-8082-exec-1] org.hibernate.SQL : select ur1_0.id,ur1_0.assigned_at,ur1_0.assigned_by,ur1_0.employee_id,ur1_0.role_id from UserRoles ur1_0 where ur1_0.employee_id=?
Hibernate: select ur1_0.id,ur1_0.assigned_at,ur1_0.assigned_by,ur1_0.employee_id,ur1_0.role_id from UserRoles ur1_0 where ur1_0.employee_id=?
2025-08-27T11:06:03.806+08:00 DEBUG 4960 --- [demo] [nio-8082-exec-1] org.hibernate.SQL : select rp1_0.id,rp1_0.granted_at,rp1_0.granted_by,rp1_0.permission_code,rp1_0.role_id from RolePermissions rp1_0 where rp1_0.role_id=?
Hibernate: select rp1_0.id,rp1_0.granted_at,rp1_0.granted_by,rp1_0.permission_code,rp1_0.role_id from RolePermissions rp1_0 where rp1_0.role_id=?  
2025-08-27T11:06:03.809+08:00 DEBUG 4960 --- [demo] [nio-8082-exec-1] org.hibernate.SQL : select rp1_0.id,rp1_0.granted_at,rp1_0.granted_by,rp1_0.permission_code,rp1_0.role_id from RolePermissions rp1_0 where rp1_0.role_id=?
Hibernate: select rp1_0.id,rp1_0.granted_at,rp1_0.granted_by,rp1_0.permission_code,rp1_0.role_id from RolePermissions rp1_0 where rp1_0.role_id=?  
2025-08-27T11:06:03.811+08:00 DEBUG 4960 --- [demo] [nio-8082-exec-1] org.hibernate.SQL : select ur1_0.id,ur1_0.assigned_at,ur1_0.assigned_by,ur1_0.employee_id,ur1_0.role_id from UserRoles ur1_0 where ur1_0.employee_id=?
Hibernate: select ur1_0.id,ur1_0.assigned_at,ur1_0.assigned_by,ur1_0.employee_id,ur1_0.role_id from UserRoles ur1_0 where ur1_0.employee_id=?
2025-08-27T11:06:03.812+08:00 DEBUG 4960 --- [demo] [nio-8082-exec-1] o.s.web.servlet.DispatcherServlet : GET "/api/notifications/unread-count",
parameters={}
2025-08-27T11:06:03.813+08:00 DEBUG 4960 --- [demo] [nio-8082-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.project.core.controller.NotificationController#unreadCount(Authentication)
2025-08-27T11:06:03.814+08:00 DEBUG 4960 --- [demo] [nio-8082-exec-1] org.hibernate.SQL : select e1_0.employee_user_id,e1_0.birth_date,e1_0.created_at,e1_0.department_id,e1_0.email,e1_0.employee_number,e1_0.employee_type,e1_0.first_name,e1_0.hire_date,e1_0.is_active,e1_0.last_login,e1_0.last_name,e1_0.manager_id,e1_0.password_hash,e1_0.phone,e1_0.photo_path,e1_0.position_id,e1_0.termination_date,e1_0.updated_at,e1_0.username from employee_users e1_0 where e1_0.username=?
Hibernate: select e1_0.employee_user_id,e1_0.birth_date,e1_0.created_at,e1_0.department_id,e1_0.email,e1_0.employee_number,e1_0.employee_type,e1_0.first_name,e1_0.hire_date,e1_0.is_active,e1_0.last_login,e1_0.last_name,e1_0.manager_id,e1_0.password_hash,e1_0.phone,e1_0.photo_path,e1_0.position_id,e1_0.termination_date,e1_0.updated_at,e1_0.username from employee_users e1_0 where e1_0.username=?
2025-08-27T11:06:03.818+08:00 DEBUG 4960 --- [demo] [nio-8082-exec-1] org.hibernate.SQL : select count_big(n1_0.id) from notifications n1_0 where n1_0.user_id=? and n1_0.is_read=0
Hibernate: select count_big(n1_0.id) from notifications n1_0 where n1_0.user_id=? and n1_0.is_read=0
2025-08-27T11:06:03.821+08:00 DEBUG 4960 --- [demo] [nio-8082-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-08-27T11:06:03.821+08:00 DEBUG 4960 --- [demo] [nio-8082-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [0]
2025-08-27T11:06:03.822+08:00 DEBUG 4960 --- [demo] [nio-8082-exec-1] o.s.web.servlet.DispatcherServlet : Completed 200 OK
2025-08-27T11:07:00.007+08:00 INFO 4960 --- [demo] [ scheduling-1] c.p.core.schedule.LowStockScheduler : 低庫存通知觸發
2025-08-27T11:07:00.008+08:00 DEBUG 4960 --- [demo] [ scheduling-1] org.hibernate.SQL : select m1_0.material_id,m1_0.active,m1_0.category,m1_0.location,m1_0.material_description,m1_0.material_name,m1_0.material_type,m1_0.price,m1_0.reorder_level,m1_0.safety_stock,m1_0.stock_current,m1_0.stock_in_shipping,m1_0.stock_reserved,m1_0.unit from core_materials m1_0 where m1_0.stock_current<m1_0.safety_stock
Hibernate: select m1_0.material_id,m1_0.active,m1_0.category,m1_0.location,m1_0.material_description,m1_0.material_name,m1_0.material_type,m1_0.price,m1_0.reorder_level,m1_0.safety_stock,m1_0.stock_current,m1_0.stock_in_shipping,m1_0.stock_reserved,m1_0.unit from core_materials m1_0 where m1_0.stock_current<m1_0.safety_stock
2025-08-27T11:07:00.030+08:00 DEBUG 4960 --- [demo] [ scheduling-1] org.hibernate.SQL : select distinct ur1_0.employee_id from
UserRoles ur1_0 join Roles r1_0 on ur1_0.role_id=r1_0.role_id where r1_0.role_name in (?,?)
Hibernate: select distinct ur1_0.employee_id from UserRoles ur1_0 join Roles r1_0 on ur1_0.role_id=r1_0.role_id where r1_0.role_name in (?,?)
2025-08-27T11:07:00.033+08:00 DEBUG 4960 --- [demo] [ scheduling-1] o.s.jdbc.datasource.DataSourceUtils : Setting JDBC Connection [HikariProxyConnection@1088406750 wrapping ConnectionID:1 ClientConnectionId: 5b69a23c-3c88-4934-94c7-6c70d975bbd4] read-only
2025-08-27T11:07:00.035+08:00 DEBUG 4960 --- [demo] [ scheduling-1] org.hibernate.SQL : select e1_0.employee_user_id,e1_0.birth_date,e1_0.created_at,e1_0.department_id,e1_0.email,e1_0.employee_number,e1_0.employee_type,e1_0.first_name,e1_0.hire_date,e1_0.is_active,e1_0.last_login,e1_0.last_name,e1_0.manager_id,e1_0.password_hash,e1_0.phone,e1_0.photo_path,e1_0.position_id,e1_0.termination_date,e1_0.updated_at,e1_0.username from employee_users e1_0 where e1_0.employee_user_id in (?)
Hibernate: select e1_0.employee_user_id,e1_0.birth_date,e1_0.created_at,e1_0.department_id,e1_0.email,e1_0.employee_number,e1_0.employee_type,e1_0.first_name,e1_0.hire_date,e1_0.is_active,e1_0.last_login,e1_0.last_name,e1_0.manager_id,e1_0.password_hash,e1_0.phone,e1_0.photo_path,e1_0.position_id,e1_0.termination_date,e1_0.updated_at,e1_0.username from employee_users e1_0 where e1_0.employee_user_id in (?)
2025-08-27T11:07:00.040+08:00 DEBUG 4960 --- [demo] [ scheduling-1] o.s.jdbc.datasource.DataSourceUtils : Resetting read-only flag of JDBC Connection [HikariProxyConnection@1088406750 wrapping ConnectionID:1 ClientConnectionId: 5b69a23c-3c88-4934-94c7-6c70d975bbd4]
2025-08-27T11:07:00.041+08:00 DEBUG 4960 --- [demo] [ scheduling-1] org.hibernate.SQL : select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
Hibernate: select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
2025-08-27T11:07:00.046+08:00 DEBUG 4960 --- [demo] [ scheduling-1] org.hibernate.SQL : select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
Hibernate: select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
2025-08-27T11:07:00.046+08:00 DEBUG 4960 --- [demo] [ scheduling-1] org.hibernate.SQL : select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
Hibernate: select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
2025-08-27T11:07:00.047+08:00 DEBUG 4960 --- [demo] [ scheduling-1] org.hibernate.SQL : select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
Hibernate: select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
2025-08-27T11:07:00.049+08:00 DEBUG 4960 --- [demo] [ scheduling-1] org.hibernate.SQL : select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
Hibernate: select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
2025-08-27T11:07:00.051+08:00 DEBUG 4960 --- [demo] [ scheduling-1] org.hibernate.SQL : select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
Hibernate: select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
2025-08-27T11:07:00.053+08:00 DEBUG 4960 --- [demo] [ scheduling-1] org.hibernate.SQL : select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
Hibernate: select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
2025-08-27T11:07:00.055+08:00 DEBUG 4960 --- [demo] [ scheduling-1] org.hibernate.SQL : select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
Hibernate: select top (?) n1_0.id from notifications n1_0 where n1_0.user_id=? and n1_0.type=? and n1_0.message=? and n1_0.is_read=0
2025-08-27T11:07:04.034+08:00 DEBUG 4960 --- [demo] [io-8082-exec-10] org.hibernate.SQL : select eu1_0.employee_user_id,eu1_0.birth_date,eu1_0.created_at,eu1_0.email,eu1_0.employee_department_id,eu1_0.employee_number,eu1_0.employee_position_id,eu1_0.employee_type,eu1_0.first_name,eu1_0.hire_date,eu1_0.is_active,eu1_0.last_login,eu1_0.last_name,eu1_0.manager_employee_user_id,eu1_0.password_hash,eu1_0.phone,eu1_0.photo_path,eu1_0.termination_date,eu1_0.updated_at,eu1_0.username from employee_users eu1_0 where eu1_0.username=?
Hibernate: select eu1_0.employee_user_id,eu1_0.birth_date,eu1_0.created_at,eu1_0.email,eu1_0.employee_department_id,eu1_0.employee_number,eu1_0.employee_position_id,eu1_0.employee_type,eu1_0.first_name,eu1_0.hire_date,eu1_0.is_active,eu1_0.last_login,eu1_0.last_name,eu1_0.manager_employee_user_id,eu1_0.password_hash,eu1_0.phone,eu1_0.photo_path,eu1_0.termination_date,eu1_0.updated_at,eu1_0.username from employee_users eu1_0 where eu1_0.username=?  
2025-08-27T11:07:04.038+08:00 DEBUG 4960 --- [demo] [io-8082-exec-10] org.hibernate.SQL : select ur1_0.id,ur1_0.assigned_at,ur1_0.assigned_by,ur1_0.employee_id,ur1_0.role_id from UserRoles ur1_0 where ur1_0.employee_id=?
Hibernate: select ur1_0.id,ur1_0.assigned_at,ur1_0.assigned_by,ur1_0.employee_id,ur1_0.role_id from UserRoles ur1_0 where ur1_0.employee_id=?
2025-08-27T11:07:04.040+08:00 DEBUG 4960 --- [demo] [io-8082-exec-10] org.hibernate.SQL : select rp1_0.id,rp1_0.granted_at,rp1_0.granted_by,rp1_0.permission_code,rp1_0.role_id from RolePermissions rp1_0 where rp1_0.role_id=?
Hibernate: select rp1_0.id,rp1_0.granted_at,rp1_0.granted_by,rp1_0.permission_code,rp1_0.role_id from RolePermissions rp1_0 where rp1_0.role_id=?  
2025-08-27T11:07:04.042+08:00 DEBUG 4960 --- [demo] [io-8082-exec-10] org.hibernate.SQL : select rp1_0.id,rp1_0.granted_at,rp1_0.granted_by,rp1_0.permission_code,rp1_0.role_id from RolePermissions rp1_0 where rp1_0.role_id=?
Hibernate: select rp1_0.id,rp1_0.granted_at,rp1_0.granted_by,rp1_0.permission_code,rp1_0.role_id from RolePermissions rp1_0 where rp1_0.role_id=?  
2025-08-27T11:07:04.045+08:00 DEBUG 4960 --- [demo] [io-8082-exec-10] org.hibernate.SQL : select ur1_0.id,ur1_0.assigned_at,ur1_0.assigned_by,ur1_0.employee_id,ur1_0.role_id from UserRoles ur1_0 where ur1_0.employee_id=?
Hibernate: select ur1_0.id,ur1_0.assigned_at,ur1_0.assigned_by,ur1_0.employee_id,ur1_0.role_id from UserRoles ur1_0 where ur1_0.employee_id=?
2025-08-27T11:07:04.045+08:00 DEBUG 4960 --- [demo] [io-8082-exec-10] o.s.web.servlet.DispatcherServlet : GET "/api/notifications/unread-count",
parameters={}
2025-08-27T11:07:04.046+08:00 DEBUG 4960 --- [demo] [io-8082-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.project.core.controller.NotificationController#unreadCount(Authentication)
2025-08-27T11:07:04.047+08:00 DEBUG 4960 --- [demo] [io-8082-exec-10] org.hibernate.SQL : select e1_0.employee_user_id,e1_0.birth_date,e1_0.created_at,e1_0.department_id,e1_0.email,e1_0.employee_number,e1_0.employee_type,e1_0.first_name,e1_0.hire_date,e1_0.is_active,e1_0.last_login,e1_0.last_name,e1_0.manager_id,e1_0.password_hash,e1_0.phone,e1_0.photo_path,e1_0.position_id,e1_0.termination_date,e1_0.updated_at,e1_0.username from employee_users e1_0 where e1_0.username=?
Hibernate: select e1_0.employee_user_id,e1_0.birth_date,e1_0.created_at,e1_0.department_id,e1_0.email,e1_0.employee_number,e1_0.employee_type,e1_0.first_name,e1_0.hire_date,e1_0.is_active,e1_0.last_login,e1_0.last_name,e1_0.manager_id,e1_0.password_hash,e1_0.phone,e1_0.photo_path,e1_0.position_id,e1_0.termination_date,e1_0.updated_at,e1_0.username from employee_users e1_0 where e1_0.username=?
2025-08-27T11:07:04.051+08:00 DEBUG 4960 --- [demo] [io-8082-exec-10] org.hibernate.SQL : select count_big(n1_0.id) from notifications n1_0 where n1_0.user_id=? and n1_0.is_read=0
Hibernate: select count_big(n1_0.id) from notifications n1_0 where n1_0.user_id=? and n1_0.is_read=0
2025-08-27T11:07:04.053+08:00 DEBUG 4960 --- [demo] [io-8082-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-08-27T11:07:04.055+08:00 DEBUG 4960 --- [demo] [io-8082-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [0]
2025-08-27T11:07:04.055+08:00 DEBUG 4960 --- [demo] [io-8082-exec-10] o.s.web.servlet.DispatcherServlet : Completed 200 OK
